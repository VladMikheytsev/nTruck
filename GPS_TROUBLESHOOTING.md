# üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "GPS –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

## üéØ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

–ï—Å–ª–∏ –≤ –∑–∞—è–≤–∫–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å **"GPS –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"**, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å GPS –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è. –í–æ—Ç –ø–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
```
http://localhost:3000/gps-diagnostics.html
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω
- –í–æ–¥–∏—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ —Å —Ä–æ–ª—å—é `driver`
- –£ –≤–æ–¥–∏—Ç–µ–ª—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç

#### ‚úÖ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω –≤–æ–¥–∏—Ç–µ–ª—é
- –í —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã GPS –¥–∞–Ω–Ω—ã–µ:
  - `gpsApiKey` - API –∫–ª—é—á –¥–ª—è Trak-4
  - `gpsDeviceId` –∏–ª–∏ `trak4DeviceId` - ID GPS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

#### ‚úÖ –°–∫–ª–∞–¥ –∏–º–µ–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –°–∫–ª–∞–¥ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{lat: number, lng: number}`

#### ‚úÖ –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
- API Trak-4 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω

## üõ†Ô∏è –ü–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –≤–æ–¥–∏—Ç–µ–ª—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ **"–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç"** –≤ —Å–∏—Å—Ç–µ–º–µ
2. –ù–∞–π–¥–∏—Ç–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ø–æ–ª–µ **"–ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –≤–æ–¥–∏—Ç–µ–ª—å"** —É–∫–∞–∑–∞–Ω –≤–æ–¥–∏—Ç–µ–ª—å
4. –ò–ª–∏ –≤ –ø–æ–ª–µ **"Driver ID"** —É–∫–∞–∑–∞–Ω ID –≤–æ–¥–∏—Ç–µ–ª—è

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GPS –¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **GPS API Key**: `Xx7MWwsUEOBjRVr7NfDQc9PEBiEN1qna`
   - **GPS Device ID**: `153332` (–∏–ª–∏ –¥—Ä—É–≥–æ–π ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
   - **Trak-4 Device ID**: `153332`

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–∫–ª–∞–¥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ **"–°–∫–ª–∞–¥—ã"** –≤ —Å–∏—Å—Ç–µ–º–µ
2. –ù–∞–π–¥–∏—Ç–µ —Å–∫–ª–∞–¥ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∑–∞—è–≤–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É —Å–∫–ª–∞–¥–∞ –µ—Å—Ç—å GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
4. –ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
   ```json
   {
     "coordinates": {
       "lat": 55.7558,
       "lng": 37.6176
     }
   }
   ```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω:
   ```bash
   node proxy-server.cjs
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
   ```bash
   curl http://localhost:3001/health
   ```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á Trak-4

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Device ID —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ Trak-4
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω–æ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –ù–∞–π–¥–∏—Ç–µ –ª–æ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏:
   - `üîç –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª—è:`
   - `üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ GPS —Å—Ç–∞—Ç—É—Å–∞:`
   - `üì° –ó–∞–ø—Ä–æ—Å GPS –¥–∞–Ω–Ω—ã—Ö:`

### –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω –≤–æ–¥–∏—Ç–µ–ª—é" | –í–æ–¥–∏—Ç–µ–ª—å –Ω–µ —Å–≤—è–∑–∞–Ω —Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º | –ù–∞–∑–Ω–∞—á—å—Ç–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤–æ–¥–∏—Ç–µ–ª—é |
| "GPS API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω" | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç gpsApiKey | –î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á –≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç |
| "GPS Device ID –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω" | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Device ID | –î–æ–±–∞–≤—å—Ç–µ Device ID –≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç |
| "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–∫–ª–∞–¥–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã" | –£ —Å–∫–ª–∞–¥–∞ –Ω–µ—Ç GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç | –î–æ–±–∞–≤—å—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–∫–ª–∞–¥–∞ |
| "GPS –¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –æ—Ç Trak-4 API" | –ü—Ä–æ–±–ª–µ–º–∞ —Å API Trak-4 | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –∏ Device ID |

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```javascript
// –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
function fixGPSIssues() {
    const appData = JSON.parse(localStorage.getItem('ntruck_app_data'));
    
    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º GPS –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
    appData.vehicles.forEach(vehicle => {
        if (!vehicle.gpsApiKey) {
            vehicle.gpsApiKey = 'Xx7MWwsUEOBjRVr7NfDQc9PEBiEN1qna';
        }
        if (!vehicle.gpsDeviceId && !vehicle.trak4DeviceId) {
            vehicle.gpsDeviceId = '153332';
            vehicle.trak4DeviceId = 153332;
        }
    });
    
    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è —Å–∫–ª–∞–¥–æ–≤
    appData.warehouses.forEach(warehouse => {
        if (!warehouse.coordinates) {
            warehouse.coordinates = {
                lat: 55.7558 + Math.random() * 0.1,
                lng: 37.6176 + Math.random() * 0.1
            };
        }
    });
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
    localStorage.setItem('ntruck_app_data', JSON.stringify(appData));
    console.log('‚úÖ GPS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã');
    location.reload();
}

// –ó–∞–ø—É—Å–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
fixGPSIssues();
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API Trak-4
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ GPS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω—ã

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º:
- ‚úÖ –í–æ–¥–∏—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
- ‚úÖ GPS –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ó–ê–ì–†–£–ñ–ï–ù–û" –∞–∫—Ç–∏–≤–Ω–∞ –ø—Ä–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ –≤ —Ä–∞–¥–∏—É—Å–µ —Å–∫–ª–∞–¥–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å "‚úì –í —Ä–∞–¥–∏—É—Å–µ —Å–∫–ª–∞–¥–∞" –∏–ª–∏ "üìç –î–ê–õ–ï–ö–û"
