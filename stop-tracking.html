<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; text-align: center; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; }
        .button { padding: 15px 30px; margin: 10px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-success { background: #28a745; color: white; }
        .status { padding: 15px; margin: 20px 0; border-radius: 4px; }
        .status.error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .status.success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è</h1>
        
        <div class="status error">
            <strong>‚ùå –ü—Ä–æ–±–ª–µ–º–∞:</strong><br>
            –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω" –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥<br>
            –°–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å GPS –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö ID —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
        </div>

        <h3>üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ:</h3>
        <button class="button btn-danger" onclick="stopAllTracking()">
            üõë –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
        </button>
        
        <button class="button btn-success" onclick="clearAndReload()">
            üîÑ –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
        </button>

        <div id="result" class="status" style="display: none;"></div>
    </div>

    <script>
        function showResult(message, isSuccess = true) {
            const resultDiv = document.getElementById('result');
            resultDiv.className = `status ${isSuccess ? 'success' : 'error'}`;
            resultDiv.innerHTML = message;
            resultDiv.style.display = 'block';
        }

        function stopAllTracking() {
            try {
                // –û—á–∏—â–∞–µ–º –≤—Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
                for (let i = 1; i < 99999; i++) {
                    clearInterval(i);
                }
                
                // –û—á–∏—â–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
                const today = new Date().toISOString().split('T')[0];
                
                for (let i = localStorage.length - 1; i >= 0; i--) {
                    const key = localStorage.key(i);
                    if (key && key.startsWith('actual_route_')) {
                        localStorage.removeItem(key);
                    }
                }
                
                localStorage.removeItem('gps_tracking_logs');
                
                showResult(`
                    ‚úÖ –í—Å–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!<br>
                    ‚úÖ –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –ø—Ä–µ–∫—Ä–∞—â–µ–Ω—ã<br>
                    ‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—á–∏—â–µ–Ω—ã<br><br>
                    üéØ –¢–µ–ø–µ—Ä—å –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ Dashboard –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–Ω–æ–≤–æ
                `);
                
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏: ${error.message}`, false);
            }
        }

        function clearAndReload() {
            stopAllTracking();
            
            setTimeout(() => {
                showResult(`
                    ‚úÖ –î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã!<br>
                    üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã...
                `);
                
                setTimeout(() => {
                    window.location.href = 'http://localhost:3000';
                }, 3000);
            }, 1000);
        }
    </script>
</body>
</html>
