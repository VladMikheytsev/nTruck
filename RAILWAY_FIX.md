# üöÇ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Railway Backend

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
**HTTP 405 Error** - Railway backend –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ POST –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/trak4/device`

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Railway Dashboard
1. –û—Ç–∫—Ä–æ–π—Ç–µ [railway.app](https://railway.app)
2. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `nTruck`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **Logs** - –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏?

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
1. **Settings** ‚Üí **General**
2. **Root Directory** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `backend`
3. **Start Command** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `node server.js`

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–í —Ä–∞–∑–¥–µ–ª–µ **Variables** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
```
PORT=3001
NODE_ENV=production
FRONTEND_URL=https://navitruck-29urxp7gv-vladshkriabas-projects.vercel.app
CORS_ORIGIN=https://navitruck-29urxp7gv-vladshkriabas-projects.vercel.app
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç Railway
1. **–£–¥–∞–ª–∏—Ç–µ** —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç –≤ Railway
2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π** –ø—Ä–æ–µ–∫—Ç:
   - "Deploy from GitHub repo"
   - –í—ã–±–µ—Ä–∏—Ç–µ: `VladMikheytsev/nTruck`
   - **Root Directory**: `backend`
3. **–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (—Å–º. –≤—ã—à–µ)
4. **–î–æ–∂–¥–∏—Ç–µ—Å—å –¥–µ–ø–ª–æ—è**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç
1. **Settings** ‚Üí **General**
2. –ò–∑–º–µ–Ω–∏—Ç–µ **Root Directory** –Ω–∞ `backend`
3. **Redeploy** –ø—Ä–æ–µ–∫—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç-—Å—Ç—Ä–∞–Ω–∏—Ü—É
https://navitruck-29urxp7gv-vladshkriabas-projects.vercel.app/test-railway.html

### 2. –í–≤–µ–¥–∏—Ç–µ Railway URL
–ù–∞–ø—Ä–∏–º–µ—Ä: `https://ntruck-production.railway.app`

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
- **Health Check** - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å OK
- **GPS API** - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

## üìã –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### Health Check (GET /health)
```json
{
  "status": "OK",
  "message": "Trak-4 GPS Proxy Server is running",
  "timestamp": "2025-10-20T04:55:45.727Z",
  "uptime": 377.29760875,
  "environment": "production",
  "version": "1.0.0"
}
```

### GPS API (POST /api/trak4/device)
```json
{
  "Device": {
    "DeviceID": 153332,
    "KeyCode": "XHR-989",
    "Label": "Freightliner_M2_106",
    "LastReport_Latitude": 34.23834,
    "LastReport_Longitude": -118.414,
    // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  }
}
```

## üö® –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Railway CLI
```bash
npm install -g @railway/cli
railway login
railway status
railway logs
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Å –Ω—É–ª—è
1. **–£–¥–∞–ª–∏—Ç–µ** —Å—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç
2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
3. **–î–æ–∂–¥–∏—Ç–µ—Å—å** –ø–æ–ª–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - Heroku
–ï—Å–ª–∏ Railway –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Heroku:
1. –°–æ–∑–¥–∞–π—Ç–µ `Procfile` –≤ –ø–∞–ø–∫–µ `backend/`
2. –î–µ–ø–ª–æ–π—Ç–µ –Ω–∞ Heroku
3. –û–±–Ω–æ–≤–∏—Ç–µ `VITE_API_URL` –≤ Vercel

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Root Directory = `backend`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

---

## üéØ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ Railway URL**
2. **–û–±–Ω–æ–≤–∏—Ç–µ Vercel**:
   - Settings ‚Üí Environment Variables
   - `VITE_API_URL` = Railway URL
   - Redeploy
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ GPS** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
